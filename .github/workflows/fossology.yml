name: FOSSOLOGY SCAN

on:
  # Runs on pushes targeting the default branch
  push:
    branches: ["ipq40xx"]

  # Allows you to run this workflow manually from the Actions tab
  workflow_dispatch:

jobs:
  scan:
    runs-on: ubuntu-latest
    steps:
    - name: Checkout code
      uses: actions/checkout@v2
    - name: Scan with FOSSology
      run: |
        # Package or prepare the code
        tar -czvf code_to_scan.tar.gz ${GITHUB_WORKSPACE}/README.md
        # Upload and scan with FOSSology using fosscli or other methods
        fosscli -u http://35.90.154.168/repo -n eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJleHAiOjE2OTQzMDM5OTksIm5iZiI6MTY5MTYyNTYwMCwianRpIjoiTWk0eiIsInNjb3BlIjoid3JpdGUifQ.fp2upL5iVozQWIFa7aJ1F7imyDUkTCxbMBLrwt3ICMA upload report -f code_to_scan.tar.gz
